# π― μ„λ²„-ν΄λΌμ΄μ–ΈνΈ ν”„λ΅μ νΈ ν„μ¬ μƒνƒ λ¶„μ„

## π“‹ ν”„λ΅μ νΈ κ°μ”
κ²μ„ ν΄λΌμ΄μ–ΈνΈ μƒνƒ λ¨λ‹ν„°λ§ + INI λ…λ Ή μ „μ†΅ μ‹μ¤ν…

---

## π—οΈ μ „μ²΄ κµ¬μ΅° (ν•λμ— λ³΄κΈ°)

```
π“ server_client_project1/
β”β”€β”€ π–¥οΈ server/                    # TCP μ„λ²„ (ν¬νΈ 5050)
β”‚   β”β”€β”€ server.py                 # ν΄λΌμ΄μ–ΈνΈ μƒνƒ μμ‹  μ„λ²„
β”‚   β”β”€β”€ settings.json             # μ„λ²„ μ„¤μ •
β”‚   β””β”€β”€ client_status.db          # SQLite λ°μ΄ν„°λ² μ΄μ¤
β”β”€β”€ π board/                     # μ›Ή λ€μ‹λ³΄λ“ (ν¬νΈ 8000)
β”‚   β”β”€β”€ app.py                    # Flask μ›Ήμ„λ²„
β”‚   β”β”€β”€ server_send.py            # INI μ „μ†΅ λ¨λ“
β”‚   β”β”€β”€ templates/dashboard.html  # λ©”μΈ λ€μ‹λ³΄λ“ UI
β”‚   β””β”€β”€ static/dashboard.js       # ν”„λ΅ νΈμ—”λ“ λ΅μ§
β””β”€β”€ π’» client/                    # ν΄λΌμ΄μ–ΈνΈ (κ° κ²μ„PC)
    β”β”€β”€ client.py                 # μƒνƒ λ³΄κ³  ν΄λΌμ΄μ–ΈνΈ
    β””β”€β”€ config.json               # ν΄λΌμ΄μ–ΈνΈ μ„¤μ •
```

---

## π”„ λ°μ΄ν„° νλ¦„ (ν„μ¬ κµ¬ν„ μƒνƒ)

### 1οΈβƒ£ μƒνƒ λ¨λ‹ν„°λ§ νλ¦„
```
κ²μ„PC (client.py) β†’ server.py (5050) β†’ SQLite DB
                                    β†‘
μ›Ή λΈλΌμ°μ € β† Flask (8000) β† dashboard.js (5μ΄λ§λ‹¤)
```

### 2οΈβƒ£ INI λ…λ Ή μ „μ†΅ νλ¦„ β­ **NEW**
```
μ›Ή λ€μ‹λ³΄λ“ β†’ Flask API β†’ server_send.py β†’ κ²μ„PC (5050)
                                      β†“
                             SQLite DB (μ΄λ ¥ μ €μ¥)
```

---

## π“ λ°μ΄ν„°λ² μ΄μ¤ κµ¬μ΅°

### π—ƒοΈ SQLite Tables (`client_status.db`)

```sql
-- μ‹¤μ‹κ°„ ν΄λΌμ΄μ–ΈνΈ μƒνƒ
clients (
    name TEXT PRIMARY KEY,      # ν΄λΌμ΄μ–ΈνΈλ…
    ip TEXT,                   # IP μ£Όμ†
    game TEXT,                 # κ²μ„λ…
    server TEXT,               # μ„λ²„λ…
    dia INTEGER,               # λ‹¤μ΄μ•„ μλ‰
    last_report TEXT,          # λ§μ§€λ§‰ λ³΄κ³  μ‹κ°„
    status TEXT,               # μƒνƒ (alive)
    message TEXT               # λ©”μ‹μ§€
)

-- μΌλ³„ λ‹¤μ΄μ•„ νμ¤ν† λ¦¬
daily_dia (
    date TEXT,                 # λ‚ μ§
    name TEXT,                 # ν΄λΌμ΄μ–ΈνΈλ…
    ip TEXT,                   # IP μ£Όμ†
    game TEXT,                 # κ²μ„λ…
    server TEXT,               # μ„λ²„λ…
    dia INTEGER,               # λ‹¤μ΄μ•„ μλ‰
    status TEXT,               # μƒνƒ
    message TEXT,              # λ©”μ‹μ§€
    PRIMARY KEY (date, name)
)

-- INI λ…λ Ή μ΄λ ¥ β­ NEW
ini_commands (
    id INTEGER PRIMARY KEY,
    client_ip TEXT,            # λ€μƒ IP
    client_name TEXT,          # λ€μƒλ…
    filename TEXT,             # INI νμΌλ…
    command_content TEXT,      # INI λ‚΄μ©
    sent_timestamp DATETIME,   # μ „μ†΅ μ‹κ°„
    execution_status TEXT,     # μƒνƒ (PENDING/SUCCESS/FAILED)
    execution_timestamp DATETIME, # μ‹¤ν–‰ μ‹κ°„
    execution_result TEXT,     # μ‹¤ν–‰ κ²°κ³Ό
    error_message TEXT         # μ¤λ¥ λ©”μ‹μ§€
)
```

---

## π μ›Ή λ€μ‹λ³΄λ“ κΈ°λ¥

### π“„ dashboard.html
```html
<!-- ν•µμ‹¬ UI μ”μ† -->
π” κ²€μƒ‰/ν•„ν„° λ°” β†’ λ‹¤μ΄μ•„ μλ‰, ν…μ¤νΈ ν•„ν„°
π›οΈ μ°μΈ΅ μƒλ‹¨ β†’ κ°„κ²°λ¨λ“, INIμ „μ†΅, μ‹κ°„κΈ°μ¤€
π—οΈ λ©”μΈ κ·Έλ¦¬λ“ β†’ 20κ°μ”© μΉ΄λ“ λ°°μΉ (λ“λκ·Έμ•¤λ“λ΅­)
π“‹ INI λ¨λ‹¬ β†’ μ „μ²΄/ν•„ν„°/μ„ νƒ λ€μƒμ— INI μ „μ†΅
```

### π“ dashboard.js ν•µμ‹¬ ν•¨μ
```javascript
// π“΅ λ°μ΄ν„° κ΄€λ¦¬
fetchClients()           # 5μ΄λ§λ‹¤ /api/clients νΈμ¶
applyFilters()           # κ²€μƒ‰/ν•„ν„° μ μ©

// π΄ μΉ΄λ“ κ΄€λ¦¬
updateCards()            # μΉ΄λ“ μƒμ„±/μ—…λ°μ΄νΈ
toggleCardByCheckbox()   # κ°λ³„ μΉ΄λ“ μ„ νƒ
toggleRowSelection()     # μ¤„ λ‹¨μ„ μ„ νƒ

// π“¤ INI μ „μ†΅ β­ NEW
sendIniCommand()         # INI λ…λ Ή μ „μ†΅
loadTemplate()           # ν…ν”λ¦Ώ λ΅λ“
addLog()                 # μ „μ†΅ λ΅κ·Έ ν‘μ‹
```

### π― Flask API μ—”λ“ν¬μΈνΈ
```python
# κΈ°μ΅΄ API
GET /                    # λ©”μΈ λ€μ‹λ³΄λ“ λ λ”λ§
GET /api/clients         # ν΄λΌμ΄μ–ΈνΈ μƒνƒ JSON
GET /dia-history         # λ‹¤μ΄μ•„ νμ¤ν† λ¦¬ νμ΄μ§€
GET /api/dia-history     # νμ¤ν† λ¦¬ λ°μ΄ν„° JSON

# μƒλ΅ μ¶”κ°€λ API β­
POST /api/send-ini       # INI λ…λ Ή μ „μ†΅
```

---

## π”§ INI μ „μ†΅ μ‹μ¤ν… (μ‹ κ· κµ¬ν„)

### π“¤ μ „μ†΅ κ³Όμ •
1. **μ›Ήμ—μ„ μ„ νƒ**: μ „μ²΄/ν•„ν„°/μ„ νƒλ ν΄λΌμ΄μ–ΈνΈ
2. **INI μ‘μ„±**: ν…ν”λ¦Ώ λλ” μ§μ ‘ μ‘μ„±
3. **Flask μ „μ†΅**: `/api/send-ini` POST μ”μ²­
4. **DB κΈ°λ΅**: `ini_commands` ν…μ΄λΈ”μ— μ €μ¥
5. **μ‹¤μ  μ „μ†΅**: `server_send.py`κ°€ κ° ν΄λΌμ΄μ–ΈνΈμ— HTTP μ”μ²­
6. **μƒνƒ μ—…λ°μ΄νΈ**: μ„±κ³µ/μ‹¤ν¨ μƒνƒ DB μ—…λ°μ΄νΈ
7. **λ΅κ·Έ ν‘μ‹**: μ‹¤μ‹κ°„ μ „μ†΅ κ²°κ³Ό μ›Ήμ— ν‘μ‹

### π“„ INI λ©”μ‹μ§€ ν•μ‹
```json
{
    "source": "command",
    "type": "ini_file",
    "filename": "192.168.1.100_2025-01-14_15-30.ini",
    "content": "[Commands]\naction=START\ntarget=VM_Flow_LoY.exe",
    "save_path": "C:\\Users\\Administrator\\Desktop\\VM_Flow_Odin\\"
}
```

---

## π® ν΄λΌμ΄μ–ΈνΈ κµ¬μ„±

### π“„ client/config.json
```json
{
    "server": {
        "ip": "172.30.101.232",
        "send_port": 5050,         # server.py ν¬νΈ
        "recv_port": 6000,         # λ…λ Ή μμ‹ μ© (λ―Έμ‚¬μ©)
        "http_port": 8123          # μ›Ήμ„λ²„μ© (λ―Έμ‚¬μ©)
    },
    "targets": ["VM_Flow_LoY.exe", "VM_Flow_NC.exe"],
    "sensitive_commands": ["RESTART", "SHUTDOWN", "EXIT", "KILL"]
}
```

### π’» client.py λ™μ‘
1. **μ£ΌκΈ°μ  μƒνƒ λ³΄κ³ ** (58μ΄λ§λ‹¤)
2. **κ²μ„ ν”„λ΅μ„Έμ¤ λ¨λ‹ν„°λ§**
3. **λ‹¤μ΄μ•„ μλ‰ μ¶”μ¶**
4. **server.pyλ΅ JSON μ „μ†΅**

---

## π€ μ£Όμ” λ³€κ²½μ‚¬ν•­ (μµμ‹ )

### β… μ™„λ£λ κΈ°λ¥
1. **INI λ…λ Ή μ „μ†΅ UI**: λ¨λ‹¬μ°½, ν…ν”λ¦Ώ, λ΅κ·Έ
2. **ν΄λΌμ΄μ–ΈνΈ μ„ νƒ**: μ²΄ν¬λ°•μ¤, μ¤„ λ‹¨μ„ μ„ νƒ
3. **Flask API**: `/api/send-ini` μ—”λ“ν¬μΈνΈ
4. **DB μ΄λ ¥ μ €μ¥**: `ini_commands` ν…μ΄λΈ”
5. **μ‹¤μ‹κ°„ λ΅κ·Έ**: μ „μ†΅ μƒνƒ ν‘μ‹

### π”„ ν„μ¬ ν†µμ‹  λ°©μ‹
- **μƒνƒ λ¨λ‹ν„°λ§**: TCP μ†μΌ“ (JSON)
- **INI μ „μ†΅**: HTTP μ”μ²­ (JSON νμ΄λ΅λ“)
- **μ›Ή μΈν„°νμ΄μ¤**: AJAX (JSON API)

---

## π― ν•µμ‹¬ ν¬νΈ κµ¬μ„±

| κµ¬μ„± μ”μ† | ν¬νΈ | ν”„λ΅ν† μ½ | μ©λ„ |
|----------|------|----------|------|
| server.py | 5050 | TCP | ν΄λΌμ΄μ–ΈνΈ μƒνƒ μμ‹  + INI λ…λ Ή μμ‹  |
| Flask (app.py) | 8000 | HTTP | μ›Ή λ€μ‹λ³΄λ“ μ„λ²„ |
| client.py β†’ server | 5050 | TCP | μƒνƒ λ³΄κ³  μ „μ†΅ |
| INI μ „μ†΅ β†’ client | 5050 | HTTP | INI λ…λ Ή μ „μ†΅ |

---

## π“ μ‚¬μ© μ‹λ‚λ¦¬μ¤

### π” λ¨λ‹ν„°λ§ μ‹λ‚λ¦¬μ¤
1. κ²μ„PCμ—μ„ `client.py` μ‹¤ν–‰
2. μ›Ήμ—μ„ `http://μ„λ²„IP:8000` μ ‘μ†
3. μ‹¤μ‹κ°„ μΉ΄λ“λ³΄λ“μ—μ„ μƒνƒ ν™•μΈ
4. κ²€μƒ‰/ν•„ν„°λ΅ μ›ν•λ” ν΄λΌμ΄μ–ΈνΈ μ°ΎκΈ°

### π“¤ λ…λ Ή μ „μ†΅ μ‹λ‚λ¦¬μ¤
1. μ›Ή λ€μ‹λ³΄λ“μ—μ„ "INI λ…λ Ή μ „μ†΅" λ²„νΌ ν΄λ¦­
2. λ€μƒ μ„ νƒ (μ „μ²΄/ν•„ν„°/μ„ νƒ)
3. ν…ν”λ¦Ώ μ„ νƒ λλ” μ§μ ‘ INI μ‘μ„±
4. μ „μ†΅ λ²„νΌ ν΄λ¦­
5. μ‹¤μ‹κ°„ λ΅κ·Έλ΅ κ²°κ³Ό ν™•μΈ
6. κ° κ²μ„PCμ— INI νμΌ μλ™ μƒμ„±

---

## π” νμΌλ³„ ν•µμ‹¬ μ—­ν• 

### π–¥οΈ μ„λ²„ μ‚¬μ΄λ“
- **`server.py`**: TCP μ„λ²„, μƒνƒ μμ‹ , λ°°μΉ μ²λ¦¬, DB μ €μ¥
- **`app.py`**: Flask μ›Ήμ„λ²„, REST API, λ€μ‹λ³΄λ“ λ λ”λ§
- **`server_send.py`**: INI λ…λ Ή μ „μ†΅ λ¨λ“

### π ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“
- **`dashboard.html`**: UI λ μ΄μ•„μ›ƒ, λ¨λ‹¬, μΉ΄λ“ κµ¬μ΅°
- **`dashboard.js`**: AJAX ν†µμ‹ , μΉ΄λ“ κ΄€λ¦¬, INI μ „μ†΅ λ΅μ§

### π’» κ²μ„PC μ‚¬μ΄λ“
- **`client.py`**: κ²μ„ λ¨λ‹ν„°λ§, μƒνƒ λ³΄κ³ , ν”„λ΅μ„Έμ¤ κ°μ‹

---

## π μ‹μ¤ν… νΉμ§•

### β¨ μ¥μ 
- **μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§**: 5μ΄λ§λ‹¤ μλ™ κ°±μ‹ 
- **μ§κ΄€μ  UI**: μΉ΄λ“λ³΄λ“ λ°©μ‹, λ“λκ·Έμ•¤λ“λ΅­
- **μ μ—°ν• λ…λ Ή**: INI ν…ν”λ¦Ώ + μ§μ ‘ μ‘μ„±
- **μ™„μ „ν• λ΅κ·Έ**: μ „μ†΅ μ΄λ ¥ DB μ €μ¥
- **λ‹¤μ¤‘ λ€μƒ**: μ „μ²΄/ν•„ν„°/μ„ νƒ λ°©μ‹

### π”§ κΈ°μ  μ¤νƒ
- **Backend**: Python + Flask + SQLite
- **Frontend**: HTML + CSS + Vanilla JavaScript
- **ν†µμ‹ **: TCP Socket + HTTP + AJAX
- **UI**: Bootstrap μ—†μ΄ μμ CSS

---

## π”§ ν„μ¬ κµ¬ν„ μƒνƒ μ”μ•½

### β… **μ™„μ „ λ™μ‘**
- ν΄λΌμ΄μ–ΈνΈ μƒνƒ λ¨λ‹ν„°λ§
- μ›Ή λ€μ‹λ³΄λ“ (μΉ΄λ“λ³΄λ“)
- λ‹¤μ΄μ•„ νμ¤ν† λ¦¬ μ°¨νΈ
- INI λ…λ Ή μ „μ†΅ μ‹μ¤ν…
- μ‹¤μ‹κ°„ λ΅κ·Έ ν‘μ‹

### π― **ν•µμ‹¬ νλ¦„**
```
κ²μ„PC β†’ server.py β†’ SQLite β† Flask β† μ›ΉλΈλΌμ°μ €
                                 β†“
                           server_send.py
                                 β†“
                             κ²μ„PC (INI νμΌ μƒμ„±)
```

μ΄ μ‹μ¤ν…μ€ ν„μ¬ **μ™„μ „ν λ™μ‘ν•λ” μƒνƒ**μ΄λ©°, κ²μ„ ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬μ™€ μ›κ²© λ…λ Ή μ „μ†΅μ΄ λ¨λ‘ κµ¬ν„λμ–΄ μμµλ‹λ‹¤.